# アカウント設定機能

このドキュメントでは、カレンダーアプリのアカウント設定機能について説明します。

## 実装済み機能

### 1. プロフィール設定

- **表示名**: ユーザーの表示名を設定できます
- **タイムゾーン**: 使用するタイムゾーンを選択できます（東京、ニューヨーク、ロンドン、上海）
- **メールアドレス表示**: 現在のメールアドレスを確認できます

### 2. パスワード変更

- 新しいパスワードを設定できます（6文字以上）
- パスワードの表示/非表示を切り替えられます
- 確認用に2回入力が必要です

### 3. メールアドレス変更

- 新しいメールアドレスに変更できます
- 変更後、確認メールが送信されます

### 4. カレンダー設定

- **デフォルトの開始時刻**: 新しい予定のデフォルト開始時刻を設定
- **デフォルトの終了時刻**: 新しい予定のデフォルト終了時刻を設定
- **週の始まり**: カレンダーの週の始まりを日曜日または月曜日に設定

### 5. 表示設定

- **ダークモード**: ダークモード/ライトモードの切り替え（現在は設定のみ、表示は未実装）

### 6. アカウント削除

- アカウントと関連するすべてのデータを削除できます
- 二重確認が必要です（安全のため）

## アクセス方法

1. ヘッダーのアカウントアイコン（人型アイコン）をクリック
2. メニューから「アカウント設定」を選択
3. 各種設定を変更して保存

## データの保存場所

- **プロフィール情報**: Supabaseの`users`テーブル
- **カレンダー設定**: ブラウザのローカルストレージ
- **表示設定**: ブラウザのローカルストレージ

## 必要なデータベース設定

アカウント設定機能を使用するには、以下のSQLスクリプトを実行する必要があります：

```bash
# Supabaseプロジェクトで以下のSQLを実行
supabase/create-user-trigger.sql
```

このスクリプトにより、新規ユーザーサインアップ時に自動的に`users`テーブルにレコードが作成されます。

## 今後の実装予定

- アイコン画像のアップロード機能
- ダークモードの実装
- 通知設定
- 二段階認証
- 言語設定

## 注意事項

- カレンダー設定（デフォルト時間、週の始まり）を変更後、ページがリロードされます
- アカウント削除は取り消せません
- メールアドレス変更後は確認メールのリンクをクリックする必要があります
